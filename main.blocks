<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="^YDh5_`;~+2gWuo@~/@0">locX</variable><variable id="HyXz6;~-:Hp.!PNZlS$`">locY</variable><variable id="e2bLk=]g|@@5h*BlY5l.">x</variable><variable id="5PBSW3F5T;fJuVK8qQR(">y</variable><variable id="Z;4ohEM9N/@BC.Y}d=`h">query</variable></variables><block type="pxt-on-start" id="SgfY/-,xE6$;aLjl=*v#" x="20" y="20"><statement name="HANDLER"><block type="typescript_statement" id="YFeWfid8g?ltEQj,DAtD" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="input.onShake(() =&gt; {" line1="    music.playTone(Note.CSharp4, 100);" line2="});" numlines="3"></mutation><next><block type="bluetooth_start_uart_service" id="B#hoE0rl=KY1Dc5z[uXb"><next><block type="typescript_statement" id="|~muQNHamfbopUS+Mp8U" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="type Query = TempertureQuery | CompassQuery;" numlines="1"></mutation><next><block type="typescript_statement" id="pSx-BfDrn7,Zl3Et5H-C" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="type Response = TempertureQueryResponse | CompassQueryResponse;" numlines="1"></mutation><next><block type="typescript_statement" id="F`|].!D|bm;FHM}s`X+w" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface TempertureQuery {" line1="    type: 0" line2="}" numlines="3"></mutation><next><block type="typescript_statement" id="d{ol1Oc/,%?`Obx;EGEZ" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface TempertureQueryResponse {" line1="    type: 0," line2="    temp: number" line3="}" numlines="4"></mutation><next><block type="typescript_statement" id="gSYE*Q(iOG_ymuMC9fD/" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface CompassQuery {" line1="    type: 1," line2="}" numlines="3"></mutation><next><block type="typescript_statement" id="Doq_|4KpJkwJAO27]aIg" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface CompassQueryResponse {" line1="    type: 1," line2="    vec: number" line3="}" numlines="4"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="bluetooth_on_data_received" id="Dk={OFW26YK4P7WjSRv3" x="601" y="20"><value name="delimiters"><shadow type="serial_delimiter_conv" id="kqmuCdw:n:!f$~!Nzo+_"><field name="del">Delimiters.NewLine</field></shadow></value><statement name="HANDLER"><block type="variables_set" id="KvRy}/3s}g37DY5eAR|s"><field name="VAR" id="Z;4ohEM9N/@BC.Y}d=`h">query</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="bluetooth_uart_read" id="$8Qs:!]=ikSE?m:~Q;/M"><value name="del"><shadow type="serial_delimiter_conv" id="2iV*{rOI?JGLUpP$[D|9"><field name="del">Delimiters.NewLine</field></shadow></value></block></value><next><block type="typescript_statement" id=":TL`[p)8m7[e9oPLsMNt" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="const parsed = JSON.parse(query.slice(0, query.length - 1)) as Query;" numlines="1" declaredvars="parsed"></mutation><next><block type="typescript_statement" id="YQXs)@o]8ACI[i}BwW9S" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let res: Response;" numlines="1" declaredvars="res"></mutation><next><block type="typescript_statement" id="bp1w^g5;rJJpqH4b4Li1" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="switch (parsed.type) {" line1="        case 0:" line2="            res = {" line3="                type: 0," line4="                temp: input.temperature()" line5="            };" line6="            bluetooth.uartWriteString(JSON.stringify(res));" line7="            break;" line8="        case 1:" line9="            res = {" line10="                type: 1," line11="                vec: input.compassHeading()" line12="            }" line13="            bluetooth.uartWriteString(JSON.stringify(res));" line14="            break;" line15="    }" numlines="16"></mutation></block></next></block></next></block></next></block></statement></block><block type="device_button_event" id="_P6W({H}eF{3Oqg66!~(" x="1454" y="20"><field name="NAME">Button.A</field><statement name="HANDLER"><block type="device_led_enable" id="T*krv,gK4%Eea5ueC9lF"><value name="on"><shadow type="logic_boolean" id="8LwQixk-sj-FAcK}0^d5"><field name="BOOL">TRUE</field></shadow></value></block></statement></block><block type="device_button_event" id=")hd8T`jaHeSR^;oC*6o5" x="1767" y="20"><field name="NAME">Button.B</field><statement name="HANDLER"><block type="device_led_enable" id="Su[-z9{]OvTg7j.#Nhr6"><value name="on"><shadow type="logic_boolean" id=",4$c@pLo87*Ec0L[MyEz"><field name="BOOL">FALSE</field></shadow></value></block></statement></block><block type="device_forever" id="EtPhn?CZQ@Q4JHX_Gyjv" x="2080" y="20"><statement name="HANDLER"><block type="variables_set" id="[?W_lJ.:Am?]QA3M@Rv#"><field name="VAR" id="^YDh5_`;~+2gWuo@~/@0">locX</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output" id="zOF-r]]_{=BEPNUmxk~G"><mutation name="toFixed" functionid=".oBGub^ZW8%5;#0MbLO|"><arg name="i" id="f11cc1di72z8nbitu19ck" type="number"></arg></mutation><value name="f11cc1di72z8nbitu19ck"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="math_arithmetic" id="SN|99_Gr-DbPsUup~y_6"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_get_rotation" id="=V;!jfv-I^n`c;T_oJy$"><field name="NAME">Rotation.Roll</field></block></value><value name="B"><shadow type="math_number" id="S|Ihasp}vPQBy_KXs5A$"><field name="NUM">10</field></shadow></value></block></value></block></value><next><block type="variables_set" id="phog:55x?d#lD2O2!l.E"><field name="VAR" id="HyXz6;~-:Hp.!PNZlS$`">locY</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output" id="9+VwJN6CVSDa_x]`pTC="><mutation name="toFixed" functionid=".oBGub^ZW8%5;#0MbLO|"><arg name="i" id="f11cc1di72z8nbitu19ck" type="number"></arg></mutation><value name="f11cc1di72z8nbitu19ck"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="math_arithmetic" id="#PSvM]l}jc:iWH?rc2F4"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_get_rotation" id="KXHw=jSV:fu#o?1G};P!"><field name="NAME">Rotation.Pitch</field></block></value><value name="B"><shadow type="math_number" id="2Jx?`Qd5RLw(DW!H2_s6"><field name="NUM">10</field></shadow></value></block></value></block></value><next><block type="controls_if" id="PflL:xURE$KJdPESHi)A"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="Qp]D(9Lf|qzWb7TUh]u-"><field name="OP">OR</field><value name="A"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="^tF^V*;PYAsB}pMh8gq^"><field name="OP">NEQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="p_u(5_H:W11!g4E[..i*"><field name="VAR" id="^YDh5_`;~+2gWuo@~/@0">locX</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="gs.x85#Icixh+lj;Nzb#"><field name="VAR" id="e2bLk=]g|@@5h*BlY5l.">x</field></block></value></block></value><value name="B"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="{v8G+A~bKN1%^+1xCe)J"><field name="OP">NEQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="Ld|9J;k_5YEp{dqP$~U1"><field name="VAR" id="HyXz6;~-:Hp.!PNZlS$`">locY</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id=",q%B#wsGJ9(N?#nL,LGM"><field name="VAR" id="5PBSW3F5T;fJuVK8qQR(">y</field></block></value></block></value></block></value><statement name="DO0"><block type="device_unplot" id="NqN%@A5j0Fz5;)afNXi)"><value name="x"><shadow type="math_number_minmax"><mutation min="0" max="4"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="K.m{m0W!|LJRMR`d[Bjw"><field name="VAR" id="e2bLk=]g|@@5h*BlY5l.">x</field></block></value><value name="y"><shadow type="math_number_minmax"><mutation min="0" max="4"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="DWv[93o7[#dznMQNB2dp"><field name="VAR" id="5PBSW3F5T;fJuVK8qQR(">y</field></block></value></block></statement><next><block type="device_plot" id="A$E6t}XzFa`Qdy/)hVbx"><value name="x"><shadow type="math_number_minmax"><mutation min="0" max="4"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="3n[#v~A_b]PFtIze)*FL"><field name="VAR" id="^YDh5_`;~+2gWuo@~/@0">locX</field></block></value><value name="y"><shadow type="math_number_minmax"><mutation min="0" max="4"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id=".VN|o9_N2KN,YsRIJ]cV"><field name="VAR" id="HyXz6;~-:Hp.!PNZlS$`">locY</field></block></value><next><block type="variables_set" id="U=4NYQ0/N[mcy.H4?f@#"><field name="VAR" id="e2bLk=]g|@@5h*BlY5l.">x</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="H70$pwLy4*3Uhp9b9XF9"><field name="VAR" id="^YDh5_`;~+2gWuo@~/@0">locX</field></block></value><next><block type="variables_set" id="P+St@fDsx[[}DsOdQqm4"><field name="VAR" id="5PBSW3F5T;fJuVK8qQR(">y</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="B)(En#a/owr!eAN7m]}C"><field name="VAR" id="HyXz6;~-:Hp.!PNZlS$`">locY</field></block></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="p!5%]mDr+Tq*_SbcgWs," x="20" y="1009"><mutation name="toFixed" functionid=".oBGub^ZW8%5;#0MbLO|"><arg name="i" id="f11cc1di72z8nbitu19ck" type="number"></arg></mutation><field name="function_name">toFixed</field><value name="f11cc1di72z8nbitu19ck"><shadow type="argument_reporter_number" id="MXGv})$d/.kJ)V7`prfo"><field name="VALUE">i</field></shadow></value><statement name="STACK"><block type="controls_if" id="A8}!^i5b:b|@|k+W(F9m"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="1Nc#%%KJ#K#sxDqbpeiG"><field name="OP">LT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="P`7I-T|V%.yen@4(}hKn"><field name="VALUE">i</field></block></value><value name="B"><shadow type="math_number" id="i{WcdlcFEai+z(9objpS"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="function_return" id="0a8lExCp?Xl=F[oZ:CV%"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="0xHnWfpk+bjA}T8t!9^#"><field name="NUM">0</field></shadow></value></block></statement><next><block type="controls_if" id="x3$k-`VyP{JGJJ:V82K:"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="h;Y,:Z^^pq9ZjRd_){kF"><field name="OP">GT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="Kde{Vj-,.YZvR`Fz5$:("><field name="VALUE">i</field></block></value><value name="B"><shadow type="math_number" id="9!I7Cf*oCH4jiY.kMqW["><field name="NUM">4</field></shadow></value></block></value><statement name="DO0"><block type="function_return" id="f#5-Q)x2R:5gwI{PWf^I"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="z]et|gR!ZzqR;fUUJBOw"><field name="NUM">4</field></shadow></value></block></statement><next><block type="function_return" id="C~X~r1OYOq*uK1IU5`n3"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_js_round" id=";ey{^K~lC9?g{ry^i_z`"><field name="OP">floor</field><value name="ARG0"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="9PdMFvY{x,qG([c/Oc%8"><field name="VALUE">i</field></block></value></block></value></block></next></block></next></block></statement></block></xml>