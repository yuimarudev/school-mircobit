<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="~BzAlFah0WT26=m*X2lZ">locX</variable><variable id="S_0.U_Da}0wtsioEH7_l">locY</variable><variable id=";GUZ(JD7M1M=Z;Ny.*0!">x</variable><variable id="s+79orQ#k=$xn4(%am6.">y</variable><variable id="WvA0t7ew/*5RW0d}/S_0">query</variable></variables><block type="pxt-on-start" id="UOnElOT8-:^Mvt,wC^Pr" x="0" y="0"><statement name="HANDLER"><block type="bluetooth_start_uart_service" id="/cR{TGnsaU3I+q?K~L8|"><next><block type="typescript_statement" id="sS3P#?^WKU!J}XvVKed2" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="type Query = TempertureQuery | CompassQuery | LightQuery | InvalidQuery;" numlines="1"></mutation><next><block type="typescript_statement" id="nCS5-QchOhPxSDj){2XZ" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="type Response = TempertureQueryResponse | CompassQueryResponse | LightQueryResponse | InvalidQueryResponse;" numlines="1"></mutation><next><block type="typescript_statement" id="8CC^[V9d2+Mq@iWJ,}9g" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface TempertureQuery {" line1="    type: 0" line2="}" numlines="3"></mutation><next><block type="typescript_statement" id="0TL[@5lwDR-OJv6Ci,6R" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface TempertureQueryResponse {" line1="    type: 0," line2="    temp: number" line3="}" numlines="4"></mutation><next><block type="typescript_statement" id=",v5@d_0Xo%FrUW})D9YQ" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface CompassQuery {" line1="    type: 1," line2="}" numlines="3"></mutation><next><block type="typescript_statement" id="hrw:.DTtKn1`_Zr3VejV" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface CompassQueryResponse {" line1="    type: 1," line2="    vec: number" line3="}" numlines="4"></mutation><next><block type="typescript_statement" id="l(QI3k[yfl=%}6f3eM:?" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface LightQuery {" line1="    type: 2" line2="}" numlines="3"></mutation><next><block type="typescript_statement" id="6M2${]O1Y9d-I,n}sh?#" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface LightQueryResponse {" line1="    type: 2," line2="    level: number" line3="}" numlines="4"></mutation><next><block type="typescript_statement" id="_0;K-G@MT1c?o@GDoo~:" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface InvalidQuery {" line1="    type: 255" line2="}" numlines="3"></mutation><next><block type="typescript_statement" id="I{af/`{_g9-2^ZSjp:gr" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface InvalidQueryResponse {" line1="    type: 255" line2="}" numlines="3"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="bluetooth_on_data_received" id="QDms*K`,ITqQZG,`OKzK" x="908" y="2"><value name="delimiters"><shadow type="serial_delimiter_conv" id="5k?cP=yOx]Z}c#+bS(=S"><field name="del">Delimiters.NewLine</field></shadow></value><statement name="HANDLER"><block type="variables_set" id="ROopJ%u0bUwE_7P4I4a6"><field name="VAR" id="WvA0t7ew/*5RW0d}/S_0">query</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="bluetooth_uart_read" id="wVk(W^5Kt,(iq=3alH_B"><value name="del"><shadow type="serial_delimiter_conv" id="zH;V}(QJ8N~:S#%ky{Xr"><field name="del">Delimiters.NewLine</field></shadow></value></block></value><next><block type="typescript_statement" id="Y$DJ#nOAYUTVFU|y+/:f" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let parsed: Query = {" line1="        type: 255" line2="    };" numlines="3" declaredvars="parsed"></mutation><next><block type="typescript_statement" id="?fV8CB8?uhqi03cXVK?G" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="try {" line1="        parsed = JSON.parse(query.slice(0, query.length - 1));" line2="    } catch { }" numlines="3"></mutation><next><block type="typescript_statement" id="4,^uCQn`K]=;$8!#PkEO" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let res: Response = { type: 255 };" numlines="1" declaredvars="res"></mutation><next><block type="typescript_statement" id="DNGf{};%wk*fD38K67;5" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="switch (parsed.type) {" line1="        case 0:" line2="            res = {" line3="                type: 0," line4="                temp: input.temperature()" line5="            };" line6="            break;" line7="        case 1:" line8="            res = {" line9="                type: 1," line10="                vec: input.compassHeading()" line11="            }" line12="            break;" line13="        case 2:" line14="            res = {" line15="                type: 2," line16="                level: input.lightLevel()" line17="            };" line18="            break;" line19="    }" numlines="20"></mutation><next><block type="bluetooth_uart_write" id="}c`llv9YyAI}c`M;7KDY"><value name="data"><block type="text_join" id="^-tV(t{Qk#t7qAixR:Wc"><mutation items="2"></mutation><value name="ADD0"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="uDh~^}{jh!Y8GFuL-$C," editable="false"><field name="EXPRESSION">JSON.stringify(res)</field></block></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="AXsgJKrjl`}1;iW(Hgk@" editable="false"><field name="EXPRESSION">"\n"</field></block></value></block></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="device_forever" id="ZqDsO3r_!f%{Lt0@M7Xv" x="1523" y="347"><statement name="HANDLER"><block type="controls_if" id="`Yuy_EWw%LEDLtqdO]G@"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="input_logo_is_pressed" id="UI*oU5p(#r^T$({wfsY]"></block></value><statement name="DO0"><block type="device_play_note" id="ozA}s[_no0{]k`9$/m`B"><value name="note"><shadow type="device_note" id="^RJy1Z`eo![nbp@oc]Tl"><field name="name">392</field></shadow></value><value name="duration"><shadow type="device_beat"></shadow><block type="math_number" id="tLWOeMX)hcN{NhcQU6f@"><field name="NUM">10</field></block></value></block></statement><next><block type="variables_set" id="$gjcF|-nRh,;;b~2la|m"><field name="VAR" id="~BzAlFah0WT26=m*X2lZ">locX</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output" id="2fBb$}B+uq*E[-E@u|G*"><mutation name="toFixed" functionid="85uYnt8I?FsdQX:Z^OK8"><arg name="i" id="vmjtv896k1z475e7bzb5" type="number"></arg></mutation><value name="vmjtv896k1z475e7bzb5"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="math_arithmetic" id="/GyP1.m*;]Riqg^PDM?E"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_get_rotation" id="Fo-{`#q[c=}}q[i1ZgeO"><field name="NAME">Rotation.Roll</field></block></value><value name="B"><shadow type="math_number" id="!y0H%4iMjQUJ`j^%)[~-"><field name="NUM">10</field></shadow></value></block></value></block></value><next><block type="variables_set" id="wkJ@dr@MMd^Wu.i+#2]w"><field name="VAR" id="S_0.U_Da}0wtsioEH7_l">locY</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output" id="RJbdZd.ul8Q$rjdR8B#t"><mutation name="toFixed" functionid="85uYnt8I?FsdQX:Z^OK8"><arg name="i" id="vmjtv896k1z475e7bzb5" type="number"></arg></mutation><value name="vmjtv896k1z475e7bzb5"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="math_arithmetic" id="{c{)m2S#ENF)DoVKxBI4"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_get_rotation" id="hDBOzh+v5EUYOqX}`Cuu"><field name="NAME">Rotation.Pitch</field></block></value><value name="B"><shadow type="math_number" id="#k)?X_%MdCVP%225eaM}"><field name="NUM">10</field></shadow></value></block></value></block></value><next><block type="controls_if" id="_lAt%#y(gIztpv=]%V$U"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="]sNY)N]d$?(t#[P1!nde"><field name="OP">OR</field><value name="A"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="qA!H@~geuEjB6E#qSQa*"><field name="OP">NEQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="xR0u$CvpBHQKAZ4f]lX/"><field name="VAR" id="~BzAlFah0WT26=m*X2lZ">locX</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="8ae(ImUP~!(kU:VpnB#C"><field name="VAR" id=";GUZ(JD7M1M=Z;Ny.*0!">x</field></block></value></block></value><value name="B"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="~00EnzbQE;kI^7?q[~A{"><field name="OP">NEQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="-{@-IC`NSu7!H{Pz{8LQ"><field name="VAR" id="S_0.U_Da}0wtsioEH7_l">locY</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="eTcmM#G10(w`,ok|QSS}"><field name="VAR" id="s+79orQ#k=$xn4(%am6.">y</field></block></value></block></value></block></value><statement name="DO0"><block type="device_unplot" id="x=o]v-|s,y.-$:!{nGzq"><value name="x"><shadow type="math_number_minmax"><mutation min="0" max="4"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="|Fl;~E4^C.@VSQ;,KZQF"><field name="VAR" id=";GUZ(JD7M1M=Z;Ny.*0!">x</field></block></value><value name="y"><shadow type="math_number_minmax"><mutation min="0" max="4"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id=".*F(1i!]:lB[8+-Z0A6`"><field name="VAR" id="s+79orQ#k=$xn4(%am6.">y</field></block></value></block></statement><next><block type="device_plot" id="GOzH15~R1O]hn[dgS6@$"><value name="x"><shadow type="math_number_minmax"><mutation min="0" max="4"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="jQ5S*qr[k%.e%:yQ=[5p"><field name="VAR" id="~BzAlFah0WT26=m*X2lZ">locX</field></block></value><value name="y"><shadow type="math_number_minmax"><mutation min="0" max="4"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="XsFazK5,xs^|0^7[V4D/"><field name="VAR" id="S_0.U_Da}0wtsioEH7_l">locY</field></block></value><next><block type="variables_set" id="}hgT-4u-%$@/ZA-`mE{/"><field name="VAR" id=";GUZ(JD7M1M=Z;Ny.*0!">x</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="2DS!YdC[28vM8Ix!2#PB"><field name="VAR" id="~BzAlFah0WT26=m*X2lZ">locX</field></block></value><next><block type="variables_set" id="z_49k+KfnM)o;rkzR2i?"><field name="VAR" id="s+79orQ#k=$xn4(%am6.">y</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="H{8dBPqHm3M?dr_W!%Of"><field name="VAR" id="S_0.U_Da}0wtsioEH7_l">locY</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="J0XBvSZDuCZ%-|)i*;0!" x="446" y="1151"><mutation name="toFixed" functionid="85uYnt8I?FsdQX:Z^OK8"><arg name="i" id="vmjtv896k1z475e7bzb5" type="number"></arg></mutation><field name="function_name">toFixed</field><value name="vmjtv896k1z475e7bzb5"><shadow type="argument_reporter_number" id="XD|*mfy|aW-+%J!cE=wH"><field name="VALUE">i</field></shadow></value><statement name="STACK"><block type="controls_if" id="$/*$iw`RN6}Ejlh38,f%"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="h?iJ`=h`Y91y7+h:~FMZ"><field name="OP">LT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="SChRKz5RX=bl`TsJNqng"><field name="VALUE">i</field></block></value><value name="B"><shadow type="math_number" id="A)EvLTTb.Q6VTdSvp+2["><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="function_return" id="yqxv|Xru^;I7q}zqoPz2"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="YK/MZ@3BGy%_1jzR=;;F"><field name="NUM">0</field></shadow></value></block></statement><next><block type="controls_if" id="=P^ekV?E7R}`MWlt;k)0"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id=",Ka?~r:7xVOHqJqB;4ml"><field name="OP">GT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="hJhv#,:Bb}-yTy5s[n-i"><field name="VALUE">i</field></block></value><value name="B"><shadow type="math_number" id="f?gMhSyDLU{UHcy2tkly"><field name="NUM">4</field></shadow></value></block></value><statement name="DO0"><block type="function_return" id="xIm(20^b}v2EeLMH9tD)"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="9BP4ZGfx%F542)KxDd0W"><field name="NUM">4</field></shadow></value></block></statement><next><block type="function_return" id="g6Yb~FNEZFp]pY]yG|!d"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_js_round" id="2H[7%*@?*^zj0nzUMNgH"><field name="OP">floor</field><value name="ARG0"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="VKYUb}zafzo*,=3im}jF"><field name="VALUE">i</field></block></value></block></value></block></next></block></next></block></statement></block></xml>